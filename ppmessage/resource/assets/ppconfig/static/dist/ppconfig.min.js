function $yvAjaxService(e,t,n,o,a){var s={NO_ERR:0};return{API_ERR:s}}function InitializeDatabaseController(e,t){var n={SQLITE:"SQLITE",MYSQL:"MYSQL",PGSQL:"PGSQL"};e.database={type:n.SQLITE,types:angular.copy(n),sqlite:{db_file_path:"/user/local/var/db/sqlite/ppmessage.db"},mysql:{db_host:"127.0.0.1",db_port:"3306",db_user:"root",db_password:"password",db_name:"ppmessage"},pgsql:{db_host:"127.0.0.1",db_port:"5432",db_user:"postgresql",db_password:"password",db_name:"ppmessage"}},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)},e.should_show_mysql=function(){return e.database.type==n.MYSQL},e.should_show_sqlite=function(){return e.database.type==n.SQLITE},e.should_show_pgsql=function(){return e.database.type==n.PGSQL},e.confirm=function(){console.log("confirm to initialize database"),t.hide("success")}}function CreateFirstController(e,t){var n={CHINESE:"CHINESE",ENGLISH:"ENGLISH"};e.user={languages:angular.copy(n),user_fullname:"Guijin Ding",user_email:"dingguijin@gmail.com",user_password:"YouGiveLoveABadName",user_language:n.CHINESE,team_name:"PPMessage"},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)},e.confirm=function(){t.hide("success")}}function ConfigIOSController(e,t){e.ios={dev_cert_file_path:null,dev_cert_password:null,pro_cert_file_path:null,pro_cert_password:null},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)},e.confirm=function(){t.hide("success")},e.pass=function(){t.hide("success")}}function ConfigAndroidController(e,t){var n={MQTT:"MQTT",GCM:"GCM",JPUSH:"JPUSH"};e.android={type:n.MQTT,types:angular.copy(n),gcm:{api_key:"AIzaSyArXf60KTz2KwROtzAlQDJozAskFAdvzBF"},jpush:{master_secret:null}},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)},e.confirm=function(){t.hide("success")},e.pass=function(){t.hide("success")},e.should_show=function(t){return e.android.type==t}}function RestartController(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)},e.confirm=function(){t.hide("success")},e.pass=function(){t.hide("success")}}InitializeDatabaseController.$inject=["$scope","$mdDialog"],CreateFirstController.$inject=["$scope","$mdDialog"],ConfigIOSController.$inject=["$scope","$mdDialog"],ConfigAndroidController.$inject=["$scope","$mdDialog"],RestartController.$inject=["$scope","$mdDialog"],function(){window&&void 0===window.ppconsole&&(window.ppconsole={version:"0.0.0.2"})}(),function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=n.length,a=window.console=window.console||{};o--;)e=n[o],a[e]||(a[e]=t)}(),angular.module("this_app.services",[]),angular.module("this_app",["720kb.tooltips","base64","ngCookies","ngAnimate","toastr","angularUtils.directives.dirPagination","angularFileUpload","blockUI","ui.router","ngMaterial","this_app.constants","this_app.i18n","this_app.route","this_app.services"]).run(["$rootScope","$location","$timeout",function(e,t,n){window.PP&&PP.boot({app_uuid:"a600998e-efff-11e5-9d9f-02287b8c0ebf"},function(e,t){console.log("PPCOM boot: ",t)})}]),angular.module("this_app.constants",[]).constant("yvConstants",{TEMPLATE_PREFIX:"templates/",STATIC_PREFIX:"/ppconfig/static/"}),angular.module("this_app.i18n",["pascalprecht.translate"]).constant("yvTransTags",{en:{COPYRIGHT_PPMESSAGE:"PPMessage."},cn:{COPYRIGHT_PPMESSAGE:"PPMessage."}}).config(["$translateProvider","yvTransTags",function(e,t){e.translations("en",t.en),e.translations("zh-CN",t.cn),e.registerAvailableLanguageKeys(["en","zh-CN"],{en:"en","en-US":"en","en-UK":"en","zh-CN":"zh-CN"}),e.determinePreferredLanguage(function(){return window.navigator.userLanguage||window.navigator.language}),e.fallbackLanguage("en","zh-CN")}]),angular.module("this_app.route",["ui.router","this_app.constants"]).config(["$stateProvider","$urlRouterProvider","yvConstants","blockUIConfig",function(e,t,n,o){o.autoInjectBodyBlock=!1,e.state("app",{"abstract":!0,url:"/app",templateUrl:"templates/app.html",controller:"AppCtrl"}).state("app.config",{url:"/config",templateUrl:"templates/config.html",controller:"ConfigCtrl"}),t.otherwise("/app/config")}]),$yvAjaxService.$inject=["$state","$timeout","$http","$cookies","yvConstants"],angular.module("this_app.services").factory("yvAjax",$yvAjaxService),angular.module("this_app").controller("AppCtrl",["$window","$scope","$rootScope","$location","$state","$translate","$timeout","$cookies","$filter","toastr","yvAjax",function(e,t,n,o,a,s,i,r,l,u,c){t.thisYear=(new Date).getUTCFullYear(),t._languages=[{lang:"zh-CN"},{lang:"en"}];t.ppmessage=function(){window.open("https://ppmessage.com")},t.switch_to_english=function(){s.use("en")},t.switch_to_chinese=function(){s.use("zh-CN")},t.is_lang_english=function(){var e=s.use();return"en"==e},t.toast_error_string=function(e){var t=l("translate")("global."+e);i(function(){u.error(t)})},t.toast_success_string=function(e){var t=l("translate")("global."+e);i(function(){u.success(t)})},t.$on("$destroy",function(){});var d=function(){};d()}]),angular.module("this_app").controller("ConfigCtrl",["$scope","$state","$stateParams","$timeout","$translate","$mdDialog","yvAjax",function(e,t,n,o,a,s,i){var r={NONE:0,DATABASE:1,FIRST:2,IOS:3,ANDROID:4,RESTART:5},l=r.NONE,u=function(e){var t=angular.extend(angular.copy(e),{user_password:sha1(e.user_password),app_uuid:yvConstants.PPMESSAGE_APP.uuid});i.signup(t,credentialsToken).success(function(e){0==e.error_code}).error(function(e){console.error("create portal user error")})};e.sign_up_form_submit=function(){u(e.user)},e.show_user_password=function(t){t?(e.user.user_password_is_visible=!0,e.user.password_input_type="text"):(e.user.user_password_is_visible=!1,e.user.password_input_type="password")},e.get_database_status=function(){return l==r.NONE?"N/A":"OK"},e.get_first_status=function(){return l>=r.FIRST?"OK":"N/A"},e.get_apns_status=function(){return l>=r.IOS?"OK":"N/A"},e.get_android_push_status=function(){return l==r.ANDROID?"OK":"N/A"},e.should_disable_initialize_database=function(){return l!=r.NONE},e.should_disable_create_first=function(){return l!=r.DATABASE},e.should_disable_config_apns=function(){return l!=r.FIRST},e.should_disable_config_android_push=function(){return l!=r.IOS},e.should_disable_restart=function(){return!(l>=r.ANDROID)},e.initialize_database=function(t){s.show({controller:InitializeDatabaseController,templateUrl:"templates/dialog/initialize-database.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".',l=r.DATABASE},function(){e.status="You cancelled the dialog.",console.log(e.status)})},e.create_first=function(t){s.show({controller:CreateFirstController,templateUrl:"templates/dialog/create-first.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".',l=r.FIRST},function(){e.status="You cancelled the dialog."})},e.config_ios=function(t){s.show({controller:ConfigIOSController,templateUrl:"templates/dialog/config-ios.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".',l=r.IOS},function(){e.status="You cancelled the dialog."})},e.config_android=function(t){s.show({controller:ConfigAndroidController,templateUrl:"templates/dialog/config-android.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".',l=r.ANDROID},function(){e.status="You cancelled the dialog."})},e.restart_ppmessage=function(e){s.show({controller:RestartController,templateUrl:"templates/dialog/restart-ppmessage.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){l=r.RESTART},function(){})}}]),angular.element(document).ready(function(){angular.bootstrap(document,["this_app"])});