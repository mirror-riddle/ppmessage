function $yvAjaxService(n,e,t,o,s){var i=function(n,e){return e=e||{},n="/ppconfig"+n,t({method:"POST",cache:!1,url:n,data:e})},a={NO_ERR:0};return{status:function(){var n="/status",e={};return i(n,e)},database:function(n){var e="/database";return i(e,n)},first:function(n){var e="/first";return i(e,n)},ios:function(n){var e="/ios";return i(e,n)},android:function(n){var e="/android";return i(e,n)},API_ERR:a}}function ConfigServerController(n,e,t){var o={SQLITE:"SQLITE",MYSQL:"MYSQL",PGSQL:"PGSQL"};n.database={server:{name:"127.0.0.1",port:8945},db:{type:o.SQLITE,types:angular.copy(o),sqlite:{db_file_path:"/usr/local/var/db/sqlite/ppmessage.db"},mysql:{db_host:"127.0.0.1",db_port:"3306",db_user:"root",db_pass:"test",db_name:"ppmessage"},pgsql:{db_host:"127.0.0.1",db_port:"5432",db_user:"postgres",db_pass:"test",db_name:"ppmessage"}}},n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(n){e.hide(n)},n.should_show_mysql=function(){return n.database.db.type==o.MYSQL},n.should_show_sqlite=function(){return n.database.db.type==o.SQLITE},n.should_show_pgsql=function(){return n.database.db.type==o.PGSQL},n.confirm=function(){t.database(n.database).success(function(){console.log("database create successfully"),e.hide("success")}).error(function(){console.log("database create failed")})}}function CreateFirstController(n,e,t){var o={CHINESE:"CHINESE",ENGLISH:"ENGLISH"};n.user={languages:angular.copy(o),user_fullname:"Guijin Ding",user_email:"dingguijin@gmail.com",user_password:"YouGiveLoveABadName",user_language:o.CHINESE,team_name:"PPMessage"},n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(n){e.hide(n)},n.confirm=function(){t.first(n.user).success(function(){e.hide("success")}).error(function(){console.log("first user create failed")})}}function ConfigIOSController(n,e,t,o){n.ios={files:{dev_cert:null,pro_cert:null,com_cert:null},passwords:{dev_cert_password:null,pro_cert_password:null,com_cert_password:null}},n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(n){e.hide(n)},n.confirm=function(){console.log(n.ios);var t=function(n){console.log("_update_progress ",n)},o=function(n){console.log("_transfer_compelete ",n),e.hide("success")},s=function(n){console.log("_transfer_failed ",n)},i=function(n){console.log("_transfer_canceled ",n)},a=new FormData;for(var r in n.ios.files)a.append(r,n.ios.files[r]);for(var r in n.ios.passwords)a.append(r,n.ios.passwords[r]);console.log(a);var c=new XMLHttpRequest;c.addEventListener("progress",t,!1),c.addEventListener("load",o,!1),c.addEventListener("error",s),c.addEventListener("abort",i),c.open("POST","/ppconfig/ios"),c.send(a)},n.pass=function(){e.hide("success")};var s=n.uploader=new o({url:"/ios"});s.onWhenAddingFileFailed=function(n,e,t){console.info("onWhenAddingFileFailed",n,e,t)},s.onAfterAddingFile=function(n){console.info("onAfterAddingFile",n)},s.onAfterAddingAll=function(n){console.info("onAfterAddingAll",n)},s.onBeforeUploadItem=function(n){console.info("onBeforeUploadItem",n)},s.onProgressItem=function(n,e){console.info("onProgressItem",n,e)},s.onProgressAll=function(n){console.info("onProgressAll",n)},s.onSuccessItem=function(n,e,t,o){console.info("onSuccessItem",n,e,t,o)},s.onErrorItem=function(n,e,t,o){console.info("onErrorItem",n,e,t,o)},s.onCancelItem=function(n,e,t,o){console.info("onCancelItem",n,e,t,o)},s.onCompleteItem=function(n,e,t,o){console.info("onCompleteItem",n,e,t,o)},s.onCompleteAll=function(){console.info("onCompleteAll")},n.getFileDetails=function(e,t){n.ios.files[t]=e.files[0]}}function ConfigAndroidController(n,e,t){var o={MQTT:"MQTT",GCM:"GCM",JPUSH:"JPUSH"};n.android={type:o.MQTT,types:angular.copy(o),gcm:{api_key:"AIzaSyArXf60KTz2KwROtzAlQDJozAskFAdvzBF"},jpush:{master_secret:null}},n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(n){e.hide(n)},n.confirm=function(){t.android(n.android).success(function(){e.hide("success")}).error(function(){console.log("android failed")})},n.pass=function(){e.hide("success")},n.should_show=function(e){return n.android.type==e}}function RestartController(n,e){n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(n){e.hide(n)},n.confirm=function(){e.hide("success")},n.pass=function(){e.hide("success")}}ConfigServerController.$inject=["$scope","$mdDialog","yvAjax"],CreateFirstController.$inject=["$scope","$mdDialog","yvAjax"],ConfigIOSController.$inject=["$scope","$mdDialog","yvAjax","FileUploader"],ConfigAndroidController.$inject=["$scope","$mdDialog","yvAjax"],RestartController.$inject=["$scope","$mdDialog"],function(){window&&void 0===window.ppconsole&&(window.ppconsole={version:"0.0.0.2"})}(),function(){for(var n,e=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=t.length,s=window.console=window.console||{};o--;)n=t[o],s[n]||(s[n]=e)}(),angular.module("this_app.services",[]),angular.module("this_app",["720kb.tooltips","base64","ngCookies","ngAnimate","toastr","angularUtils.directives.dirPagination","angularFileUpload","blockUI","ui.router","ngMaterial","this_app.constants","this_app.i18n","this_app.route","this_app.services"]).run(["$rootScope","$location","$timeout",function(n,e,t){window.PP&&PP.boot({app_uuid:"a600998e-efff-11e5-9d9f-02287b8c0ebf"},function(n,e){console.log("PPCOM boot: ",e)})}]),angular.module("this_app.constants",[]).constant("yvConstants",{TEMPLATE_PREFIX:"templates/",STATIC_PREFIX:"/ppconfig/static/"}),angular.module("this_app.i18n",["pascalprecht.translate"]).constant("yvTransTags",{en:{COPYRIGHT_PPMESSAGE:"PPMessage."},cn:{COPYRIGHT_PPMESSAGE:"PPMessage."}}).config(["$translateProvider","yvTransTags",function(n,e){n.translations("en",e.en),n.translations("zh-CN",e.cn),n.registerAvailableLanguageKeys(["en","zh-CN"],{en:"en","en-US":"en","en-UK":"en","zh-CN":"zh-CN"}),n.determinePreferredLanguage(function(){return window.navigator.userLanguage||window.navigator.language}),n.fallbackLanguage("en","zh-CN")}]),angular.module("this_app.route",["ui.router","this_app.constants"]).config(["$stateProvider","$urlRouterProvider","yvConstants","blockUIConfig",function(n,e,t,o){o.autoInjectBodyBlock=!1,n.state("app",{"abstract":!0,url:"/app",templateUrl:"templates/app.html",controller:"AppCtrl"}).state("app.config",{url:"/config",templateUrl:"templates/config.html",controller:"ConfigCtrl"}),e.otherwise("/app/config")}]),$yvAjaxService.$inject=["$state","$timeout","$http","$cookies","yvConstants"],angular.module("this_app.services").factory("yvAjax",$yvAjaxService),angular.module("this_app").controller("AppCtrl",["$window","$scope","$rootScope","$location","$state","$translate","$timeout","$cookies","$filter","toastr","yvAjax",function(n,e,t,o,s,i,a,r,c,l,u){e.thisYear=(new Date).getUTCFullYear(),e._languages=[{lang:"zh-CN"},{lang:"en"}];e.ppmessage=function(){window.open("https://ppmessage.com")},e.switch_to_english=function(){i.use("en")},e.switch_to_chinese=function(){i.use("zh-CN")},e.is_lang_english=function(){var n=i.use();return"en"==n},e.toast_error_string=function(n){var e=c("translate")("global."+n);a(function(){l.error(e)})},e.toast_success_string=function(n){var e=c("translate")("global."+n);a(function(){l.success(e)})},e.$on("$destroy",function(){});var f=function(){};f()}]),angular.module("this_app").controller("ConfigCtrl",["$scope","$state","$stateParams","$timeout","$translate","$mdDialog","yvAjax",function(n,e,t,o,s,i,a){var r={NONE:0,SERVER:1,DATABASE:2,FIRST:3,IOS:4,ANDROID:5,RESTART:6};n._config_status=r.NONE,n.get_database_status=function(){return n._config_status<r.DATABASE?"N/A":"OK"},n.get_first_status=function(){return n._config_status>=r.FIRST?"OK":"N/A"},n.get_apns_status=function(){return n._config_status>=r.IOS?"OK":"N/A"},n.get_android_push_status=function(){return n._config_status==r.ANDROID?"OK":"N/A"},n.should_disable_initialize_database=function(){return n._config_status!=r.NONE&&n._config_status!=r.SERVER},n.should_disable_create_first=function(){return n._config_status!=r.DATABASE},n.should_disable_config_apns=function(){return n._config_status!=r.FIRST},n.should_disable_config_android_push=function(){return n._config_status!=r.IOS},n.should_disable_restart=function(){return!(n._config_status>=r.ANDROID)},n.initialize_database=function(e){i.show({controller:ConfigServerController,templateUrl:"templates/dialog/config-server.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){n._init_config_status()},function(){})},n.create_first=function(e){i.show({controller:CreateFirstController,templateUrl:"templates/dialog/create-first.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){n._init_config_status()},function(){})},n.config_ios=function(e){i.show({controller:ConfigIOSController,templateUrl:"templates/dialog/config-ios.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){n._init_config_status()},function(){})},n.config_android=function(e){i.show({controller:ConfigAndroidController,templateUrl:"templates/dialog/config-android.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){n._init_config_status()},function(){})},n.restart_ppmessage=function(e){i.show({controller:RestartController,templateUrl:"templates/dialog/restart-ppmessage.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){n._init_config_status()},function(){})},n._init_config_status=function(){a.status().success(function(e){n._config_status=r[e.status],console.log(n._config_status)}).error(function(){})},n._init_config_status()}]),angular.element(document).ready(function(){angular.bootstrap(document,["this_app"])});